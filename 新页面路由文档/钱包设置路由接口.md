1) Settings · Wallet（连接钱包与会话）

前端路由 / Route：/settings/wallet

页面目的 / Goal：连接钱包 → 切到 Base → 签名登录，拿到 session_token。

用户能做什么 / User actions

Connect Wallet（连接钱包）

Switch to Base（切换到 Base）

Sign Message（签名登录）

接口 / APIs

POST /auth/nonce（US）
Req: { "wallet_address": "0xUser..." }
Res: { "nonce": "random-string", "expires_in_s": 300 }
解释：服务端生成一次性随机串，5 分钟有效。

POST /auth/login（US）
Req: { "wallet_address": "0xUser...", "nonce": "...", "signature": "0x..." }
Res: { "session_token": "tok_...", "expires_in_s": 86400 }
解释：验签成功后，发会话令牌。前端存于内存或安全存储。

数据库 / DB

wallets：

id TEXT PK 唯一 ID

wallet_address TEXT UNIQUE NOT NULL 钱包地址

created_at TEXT, updated_at TEXT

sessions：

id TEXT PK

wallet_id TEXT FK wallets(id)

session_token TEXT UNIQUE NOT NULL

expires_at TEXT, created_at TEXT

与其他页关系 / Relations
成功后跳转 /settings/exchange-api。失败保留在本页提示。

边界 / Edge cases

钱包未安装：给出安装提示链接。

链错误：提示“切换到 Base”。

签名拒绝：停留并可重试。

AI 实现要点 / Hints

前端按钮状态：未连接/已连接、链正确/错误、已登录/未登录。

把 session_token 放到后续请求 X-Session-Token 头。