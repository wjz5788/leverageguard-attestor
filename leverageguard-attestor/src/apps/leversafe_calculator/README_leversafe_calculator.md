# LeverSafe 爆仓保险计算器

LeverSafe 爆仓保险计算器用于评估杠杆交易的爆仓保险保费及潜在赔付金额。仓位持有人可以借助该工具快速判断购买保险的成本、赔付比例以及赔付金额，辅助风险管理。

## 文件结构

```
LeverSafeCalculator/
├── leversafe_calculator.py       # Python 计算核心及 CLI
├── insurance_calc.html           # 浏览器端单页应用
└── README_leversafe_calculator.md
```

## 计算原理

### 保费

```
保费比例 = min(0.15, 0.05 + (leverage - 20) * 0.001 + (principal / 500) * 0.02)
保费 = 保费比例 * principal
```

- 保费比例上限 15%
- 基础费率 5%
- 杠杆每增加 1 倍，费率增加 0.1%
- 本金每增加 500 USDT，费率增加 2%

### 赔付比例

```
赔付比例 = min(0.5, max(0.1, 0.25 + (leverage - 50) * 0.005 - (principal / 500) * 0.1))
赔付金额 = 赔付比例 * principal
```

- 赔付比例在 10% ~ 50% 之间
- 基础赔付比例 25%
- 杠杆每增加 1 倍，赔付比例增加 0.5%
- 本金每增加 500 USDT，赔付比例减少 10%

## 使用方法

### Python 脚本

1. 安装 Python 3.9+。
2. 在终端执行：

   ```bash
   python leversafe_calculator.py                    # 打印预设案例
   python leversafe_calculator.py --principal 120 --leverage 35
   ```

3. 输出示例：

   ```
   案例 1
   --------------------
   本金: 100.00 USDT
   杠杆: 20.00 x
   保费: 5.40 USDT (费率 5.40%)
   赔付比例: 10.00%
   赔付金额: 10.00 USDT
   ```

### 浏览器界面

1. 打开 `insurance_calc.html`。
2. 输入本金（50-500 USDT）和杠杆倍数（1-200）。
3. 点击“计算保险”或按回车，即刻获得保费、赔付比例与赔付金额。

## 预设测试用例

| 本金 (USDT) | 杠杆 | 保费 (USDT) | 赔付比例 | 赔付金额 (USDT) |
|-------------|------|-------------|----------|------------------|
| 100         | 20   | 5.40        | 10.0%    | 10.00            |
| 500         | 100  | 75.00       | 40.0%    | 200.00           |
| 100         | 100  | 13.40       | 48.0%    | 48.00            |

## 限制与注意事项

1. 本金范围限定为 50-500 USDT。
2. 杠杆倍数范围限定为 1-200 倍。
3. 前端页面为静态应用，无需额外部署。
4. Python 脚本可作为 API 服务的核心逻辑，便于扩展。

## 后续扩展建议

1. 引入忠诚度 / VIP 等差异化加成模型。
2. 支持更多保险产品与阶梯费率。
3. 集成交易所 API 自动读取持仓数据并计算保费。
4. 使用 React / Vue / Svelte 等框架重构前端界面，提供更好交互体验。
