# LiqPass 开发规范

## 代码规范

### 命名规范

#### 文件命名
- 使用小写字母和连字符：`user-service.js`
- 组件文件使用PascalCase：`UserProfile.vue`
- 配置文件使用小写：`config.json`

#### 变量命名
- 使用camelCase：`userName`, `isActive`
- 常量使用UPPER_CASE：`MAX_USERS`, `API_BASE_URL`
- 布尔变量以is/has/should开头：`isLoading`, `hasPermission`

#### 函数命名
- 使用动词开头：`getUser()`, `validateInput()`
- 异步函数以Async结尾：`fetchDataAsync()`

### 代码风格

#### 缩进和空格
- 使用2个空格缩进
- 操作符前后添加空格
- 函数参数后添加空格

```javascript
// 正确
function calculateTotal(price, quantity) {
  return price * quantity;
}

// 错误
function calculateTotal(price,quantity){
return price*quantity;
}
```

#### 注释规范
- 函数注释使用JSDoc格式
- 复杂逻辑添加行内注释
- TODO注释需要指定负责人和日期

```javascript
/**
 * 计算用户订单总价
 * @param {number} price - 商品单价
 * @param {number} quantity - 商品数量
 * @returns {number} 订单总价
 */
function calculateOrderTotal(price, quantity) {
  // TODO: 添加折扣计算 (张三 2024-01-01)
  return price * quantity;
}
```

## Git工作流

### 分支管理

#### 分支命名
- `main` - 主分支，生产环境代码
- `develop` - 开发分支，集成功能
- `feature/功能名称` - 功能开发分支
- `bugfix/问题描述` - 问题修复分支
- `release/版本号` - 发布分支

#### 提交信息规范
- 使用英文描述提交内容
- 格式：`类型(范围): 描述`
- 类型：feat, fix, docs, style, refactor, test, chore

```bash
# 示例
feat(user): 添加用户注册功能
fix(auth): 修复登录验证问题
docs(readme): 更新项目文档
```

### 代码审查

#### 审查流程
1. 开发完成后创建Pull Request
2. 至少需要1名审查者批准
3. 通过自动化测试
4. 合并到目标分支

#### 审查要点
- 代码是否符合规范
- 功能实现是否正确
- 测试覆盖是否充分
- 性能和安全考虑

## 测试规范

### 测试类型

#### 单元测试
- 测试单个函数或组件
- 覆盖所有边界条件
- 使用Jest或类似框架

#### 集成测试
- 测试模块间交互
- 验证API接口
- 使用Supertest或类似工具

#### E2E测试
- 测试完整用户流程
- 使用Cypress或Playwright

### 测试覆盖率要求
- 业务逻辑代码：≥80%
- 工具函数：≥90%
- 核心组件：≥85%

## 安全规范

### 数据安全
- 敏感信息加密存储
- 使用HTTPS传输数据
- 输入验证和过滤

### 代码安全
- 定期依赖包安全扫描
- 避免硬编码敏感信息
- 使用环境变量配置

### 智能合约安全
- 第三方审计
- 漏洞赏金计划
- 紧急响应机制

## 部署规范

### 环境配置
- 开发环境：本地开发
- 测试环境：功能验证
- 预生产环境：性能测试
- 生产环境：线上服务

### 部署流程
1. 代码审查通过
2. 自动化测试通过
3. 构建生产版本
4. 部署到对应环境
5. 健康检查验证

## 文档规范

### 文档结构
- 使用Markdown格式
- 统一的目录结构
- 版本控制和变更记录

### 文档内容
- 清晰的标题和层级
- 代码示例和说明
- 更新日志和维护信息

## 性能规范

### 前端性能
- 图片和资源优化
- 代码分割和懒加载
- 缓存策略优化

### 后端性能
- 数据库查询优化
- API响应时间监控
- 负载均衡和扩容

## 监控和日志

### 应用监控
- 错误追踪和报警
- 性能指标监控
- 用户行为分析

### 日志管理
- 结构化日志格式
- 日志级别分类
- 日志存储和检索

---

*最后更新：2024-01-01*